local game = game
local plrs = game.Players
local plr = plrs.LocalPlayer
local pgui = plr:WaitForChild('PlayerGui')
local vu = game:GetService('VirtualUser')
local pos = CFrame.new(-545 + math.random(-5,5),54,-3582)
local task = task
local pairs = pairs
local tick = tick
local bp = plr.Backpack

local pslot = getgenv().Slot
local nslot = getgenv().Namek

-- Dont Change --

local Time = .28
local CTime = .3
local QTime = .9
local tries = 0
local reps = 0
local obj = 'nil'
local Last = tick()

plr.Idled:connect(function()
    vu:CaptureController()
    vu:ClickButton2(Vector2.new())
end)

function StatFrame()
   pgui.HUD.Bottom.Stats.Visible = true
   pgui.HUD.Bottom.Stats.ImageColor3 = Color3.new(0,147,255)
   pgui.HUD.Bottom.Stats.Labvel.ImageColor3 = Color3.new(0,147,255)
   pgui.HUD.Bottom.Stats.StatPoints.BorderColor3 = Color3.new(0,147,255)
   pgui.HUD.Bottom.SP.Text = 'Stat Points: '..pgui.HUD.Bottom.Stats.StatPoints.Val.Text
   pgui.HUD.Bottom.SP.BackgroundColor3 = Color3.new(0,147,255)
   pgui.HUD.Bottom.Stats.Labvel.TextLabel.Text = 'Inf Stat'
end

function ChatWait(t)
    pgui['HUD'].Bottom.ChatGui.TextLabel:GetPropertyChangedSignal('Text'):Wait()
    task.wait(t)
end

function IsDummy()
    if plr.Character['Race'].Value == 'Namekian' and tonumber(pgui.HUD.Bottom.Stats.LVL.Val.Text) <= 55 then
        return true
    else
        return false
    end
end

function NewNamek()
    repeat task.wait(.2) if pgui.Setup.Frame.Side.Race.Set.Texter.Text == 'Namekian' then break end plr.Backpack.Scripter.RemoteEvent:FireServer(pgui.Setup.Frame.Side.Race,'up') until pgui.Setup.Frame.Side.Race.Set.Texter.Text == 'Namekian'
    task.wait(.2)
    plr.Backpack.Scripter.RemoteEvent:FireServer('woah')
end

if game.PlaceId == 552500546 then
    repeat task.wait(.1) until plr.Character:FindFirstChild('i')
    NewNamek()
    return
end

function SwitchSlot(slot, off)
    off = off or 0
    plr.Backpack.ServerTraits['ChatStart']:FireServer(workspace.FriendlyNPCs['Character Slot Changer']) ChatWait(.16-off)
    plr.Backpack.ServerTraits['ChatAdvance']:FireServer({'Yes'}) ChatWait(.16-off)
    plr.Backpack.ServerTraits['ChatAdvance']:FireServer({'k'}) ChatWait(.14)
    plr.Backpack.ServerTraits['ChatAdvance']:FireServer({slot})
end

function Chat(time, npc, v1, v2, v3, v4)
    repeat task.wait() until plr.Backpack:FindFirstChild('ServerTraits')
    plr.Backpack.ServerTraits.ChatStart:FireServer(workspace.FriendlyNPCs[npc]) task.wait(time)
    plr.Backpack.ServerTraits.ChatAdvance:FireServer({v1})
    if v2 then
        task.wait(time)
        plr.Backpack.ServerTraits.ChatAdvance:FireServer({v2})
        if v3 then
            task.wait(time)
            plr.Backpack.ServerTraits.ChatAdvance:FireServer({v3})
            if v4 then
                task.wait(time)
                plr.Backpack.ServerTraits.ChatAdvance:FireServer({v4})
            end
        end
    end
end

function Level()

    plr.Backpack.ServerTraits.ChatStart:FireServer(workspace.FriendlyNPCs.Korin.Chat.Chat) task.wait(CTime)
    plr.Backpack.ServerTraits.ChatAdvance:FireServer({'k'}) task.wait(CTime)
    plr.Backpack.ServerTraits.ChatAdvance:FireServer({'k'}) task.wait(CTime)
    plr.Backpack.ServerTraits.ChatAdvance:FireServer({'DRINK'}) task.wait(CTime)
    plr.Backpack.ServerTraits.ChatAdvance:FireServer({'k'}) task.wait(CTime)

    Chat(CTime,'Bulma','k','k','Yes','k') task.wait(QTime) Chat(CTime,'SpaceShip','k','k','No') task.wait(CTime)
    Chat(CTime,'Trunks [Future]','k','k','Yes','k') task.wait(QTime) Chat(CTime,'TimeMachine','k','k','No') task.wait(CTime)
    for i,v in pairs(workspace.FriendlyNPCs:GetDescendants()) do
        if v.Name == 'Chat' and v.ClassName ~= 'Folder' then
            if v.Value == "I heard there's a spaceship in Yunzabit Heights" then
                v.Parent.Parent.Name = 'NQuest'
                Chat(CTime,'NQuest','k','Yes','k') task.wait(QTime) Chat(CTime,'NamekianShip','k','k','No') task.wait(CTime)
            end
        end
    end

    Chat(CTime,'Elder Kai','k','k','Yes','k') task.wait(CTime)

    obj = 'nil'

    repeat task.wait(.1) until tonumber(pgui.HUD.Bottom.Stats.LVL.Val.Text) >= 50
    task.wait(.1)
    
end

function KamiCheck()

    if not workspace['FriendlyNPCs']:FindFirstChild('KAMI') then
        obj = 'reset'
        warn('RESET : KAMI NOT FOUND')
    else
        warn('KAMI FOUND')
    end
    
end

function Kami()
    plr.Backpack.ServerTraits.ChatStart:FireServer(workspace.FriendlyNPCs['KAMI'].Chat)
    plr.Backpack.ServerTraits.ChatAdvance:FireServer({'k'})
end

if IsDummy() then
    if tonumber(pgui.HUD.Bottom.Stats.LVL.Val.Text) <= 50 then
        obj = 'lvl'
    end
end

if obj == 'lvl' then
    Level()
end

Last = tick()

if IsDummy() then
    SwitchSlot('Slot'..pslot, .015)
    task.wait(Time)
    Kami()
else
    SwitchSlot('Slot'..nslot, .04)
end

function CharAdded(Cac)
    repeat Cac.HumanoidRootPart.CFrame = pos if tick() - Last > 6 then Last = tick() plr.Character.Head:Destroy() end task.wait() until Cac:FindFirstChild('Ki')
    repeat Cac.HumanoidRootPart.CFrame = pos task.wait(.25) if tick() - Last > 8 then Last = tick() plr.Character.Head:Destroy() end until pgui.HUD.Bottom.Senzu.Visible == false or pgui.HUD.Bottom.Senzu.Am.Text ~= '0'
    Last = tick()
    plr.Backpack:WaitForChild('ServerTraits')
    plr.Backpack.ServerTraits:WaitForChild('ChatStart')
    plr.Backpack.ServerTraits:WaitForChild('ChatAdvance')
    StatFrame()
    KamiCheck()
    task.wait(.8)

    if obj == 'reset' then
       if IsDummy() == true then
            Chat(CTime,'Start New Game [Redo Character]','Yes','k','Yes')
            return
        elseif IsDummy() == false then
            SwitchSlot('Slot'..nslot, .015)
       end
    end

	if IsDummy() == true then
        warn('Dummy')
        SwitchSlot('Slot'..pslot, .01)
        Last = tick()
        task.wait(Time)
        Kami()
        task.wait(.3)
        warn('Check')
        if pgui['HUD']['Bottom']['ChatGui']['TextLabel'].Text == 'Mr Popo is a nice guy' then
            if not plr.Character.HumanoidRootPart:FindFirstChild('Booster') then
                obj = 'reset'
                warn('RESET')
            end
        end
	elseif IsDummy() == false then
        warn('NotDummy')
		SwitchSlot('Slot'..nslot, .02)
        Last = tick()
	end

end

plr.CharacterAdded:Connect(CharAdded)
